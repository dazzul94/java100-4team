
<!DOCTYPE html>
<html>
<head>
<title>회원가입</title>
<meta charset="UTF-8">
<link rel="stylesheet" href='../../node_modules/bootstrap/dist/css/bootstrap.min.css'>
<link rel='stylesheet' href='../../css/test.css'>

<link href="http://fonts.googleapis.com/earlyaccess/nanumgothic.css" rel="stylesheet" type="text/css">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">

<link href="../../node_modules/bootstrap-fileinput/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" media="all" rel="stylesheet" type="text/css"/>
<link href="../../node_modules/bootstrap-fileinput/themes/explorer-fa/theme.css" media="all" rel="stylesheet" type="text/css"/>
  
</head>
<body style="background-image:url('../../img/portfolio/group.jpg'); 
background-repeat: no-repeat; background-position: center; 
background-size: cover; background-attachment: fixed;">
<!-- <h1 align="center">회원가입</h1>
<br><br> -->




<div style="margin-top: 100px" class='container1'>

<form id="form" method="post" enctype="multipart/form-data" >

<div class="form-group1" >
<input id='act_id' class="form-control1" type='text' placeholder="아이디" required name='accountName' style="margin-bottom: 0.3rem;">
<p align="center" id="checkId" >
</div>

<div class="form-group1">
<input id='email' class="form-control1" type="email" placeholder="이메일" required name='email' style="margin-bottom: 0.3rem;">
<p align="center" id="checkEmail" >
</div>


<div class="form-group1">
<input id='pwd' type='password' class="form-control1" placeholder="비밀번호" required name='password'>
</div>

<div class="form-group1">
<input id="PwCheck" type="password" class="form-control1" style="margin-bottom: 0.3rem;" required placeholder="비밀번호 재입력" >
<p align="center" id="pwsame">
</div>

<div class="form-group1">
<input id='name' type='text' class="form-control1" placeholder="이름" required name='name'>
</div>

<div class="form-group1">
<input id='acc_no' type='text' class="form-control1" placeholder="계좌번호" name='accountNo'>
</div>

<div class="form-group1">
<input id='bank' type='text' class="form-control1" placeholder="은행" name='bank'>
</div>

<div class="form-group1">
<input id='cnt' type='text' class="form-control1" placeholder="한마디" name='comment'>
</div>

<div class="form-group1">
<input id='phone' type='text' class="form-control1"  style="margin-bottom: 0.3rem;" placeholder="전화번호" name='phone'>
</div>

 <div class="form-group1">
<input  style="position: relative; display:inline-block;width:250px;margin-left: 75px;" type="text" id="sample6_postcode" class="form-control1" placeholder="우편번호" name='postNo'>
<input class="btn btn-primary" type="button" style='display:inline-block;width:95px; height:35px; top: 100px; ' onclick="sample6_execDaumPostcode()" value="우편번호"><br>
</div>

<!--  <div style='width:185px;height:40px;display:inline-block; margin-left: 20px'>
<input style='display:inline-block;width:96px;' 
style="margin-bottom: 0.5rem; background-color: #D8D8D8;" type="button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기">
</div> 
</div>
style='display:inline-block;width:250px;margin-left: 75px;'
  -->
 
<div class="form-group1">
<input type="text" id="sample6_address" class="form-control1" placeholder="주소"name='baseAddress'>
</div>
<div class="form-group1">
<input type="text" id="sample6_address2" class="form-control1" placeholder="상세주소" name='detailAddress'>
</div>

<!-- <div id="file" class="form-group1">
<input style="margin-bottom: 0.7rem;" id='photo' class="file-input" type="file" name='photo'>
</div> -->
     <div id="file" class="form-group1">
            <input id='photo'  name="photo" type="file">
        </div>
       
<div class='form-group1'>
    <button id="addBtn" type="button" hidden="0" class='form-control2 btn btn-info btn-sm'>회원가입</button>
</div>
<div class='form-group1'>
    <div id="loginBtn" class="button_base b07_3d_double_roll">
        <div>회원가입</div>
        <div>회원가입</div>
        <div>회원가입</div>
        <div>회원가입</div>
    </div>    
</div>
</form>
<!-- <div class='form-group1'>
                 <div onclick="location='../../auth/login.jsp'" id="loginBtn" class="button_base b07_3d_double_roll">
                      <div>로그인</div>
                      <div>로그인</div>
                      <div>로그인</div>
                      <div>로그인</div>
                  </div>    
            </div>
-->
</div> 

<script src='../../node_modules/jquery/dist/jquery.min.js'></script>
  <!--file input  -->
  <script src="../../node_modules/bootstrap-fileinput/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="../../node_modules/bootstrap-fileinput/js/fileinput.js" type="text/javascript"></script>
    <script src="../../node_modules/bootstrap-fileinput/js/locales/fr.js" type="text/javascript"></script>
    <script src="../../node_modules/bootstrap-fileinput/js/locales/es.js" type="text/javascript"></script>
    <script src="../../node_modules/bootstrap-fileinput/themes/explorer-fa/theme.js" type="text/javascript"></script>
    <script src="../../node_modules/bootstrap-fileinput/themes/fa/theme.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" type="text/javascript"></script>

<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script>
<script src='../../node_modules/popper.js/dist/umd/popper.min.js'></script>
<script src='../../node_modules/bootstrap/dist/js/bootstrap.min.js'></script>
<script src="https://ssl.daumcdn.net/dmaps/map_js_init/postcode.v2.js"></script>
<script src='/node_modules/sweetalert/dist/sweetalert.min.js'></script>

<script type="text/javascript">
var pwd = $('#pwd'),
    pwd2 = $('#PwCheck'),
    id = $('#act_id'),
    email = $('#email'),
    nameItem = $('#name'),
    accNo = $('#acc_no'),
    bank = $('#bank'),
    cnt = $('#cnt'),
    phone = $('#phone'),
    postNo = $('#sample6_postcode'),
    baseAddr = $('#sample6_address'),
    detailAddr = $('#sample6_address2'),
    photos = $('#photo'),
    addBtn = $('#addBtn');

$(document).ready(function(){
    id.keyup(() => {
        $.ajax({
            type: 'POST',
            url: '  ../../json/user/checkId',
            data: {
                "accountName" : id.val()
            },
            success: function(data){
                console.log(data)
                if($.trim(data) == 0){
                    $('#checkId').html('<p style="color:blue">사용가능</p>');
                } 
                else{
                    $('#checkId').html('<p style="color:red">사용불가능</p>');
                }
            }
        });    //end ajax    
    });    //end on  
    
    email.keyup(() => {
        $.ajax({
            type: 'POST',
            url: '  ../../json/user/checkEmail',
            data: {
                "email" : email.val()
            },
            success: function(data){
                console.log(data)
                if($.trim(data) == 0){
                    $('#checkEmail').html('<p style="color:blue">사용가능</p>');
                } 
                else{
                    $('#checkEmail').html('<p style="color:red">사용불가능</p>');
                }
            }
        });    //end ajax    
    }); 
    
});

$('#PwCheck').keyup(() => {
    
    
    if (pwd.val() == pwd2.val()) {
        $('#pwsame').html("<p style='color:blue;'>일치합니다.</p>");
    } else {
        $('#pwsame').html("<p style='color:red;'>비밀번호가 틀렸습니다. 다시 입력해 주세요</p>");
    }
});

addBtn.click(() => {
    $(':required').each(function() {
        if ($(this).val() == "") {
            swal("빈칸을 채워주세요");
            throw stop;
        };
    });
    var formData = new FormData($("#form")[0]);
    $.ajax('../../json/user/add', {
        data : formData,
        dataType: 'json',
        method: 'POST',
        processData : false,
        contentType : false,
        success: (result) => {
            location.href = "../item/list.html";
        },
        error:function(request,status,error){
            swal("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
         }

    });
});


var loginBtn = document.querySelector('#loginBtn')
var addBtn = document.querySelector('#addBtn')

 loginBtn.addEventListener('click', function(event) {
  var me = new MouseEvent('click')

  addBtn.dispatchEvent(me)
}) 

addBtn.addEventListener('click', function(event) {
}) 


    function sample6_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var fullAddr = ''; // 최종 주소 변수
                var extraAddr = ''; // 조합형 주소 변수

                // 사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    fullAddr = data.roadAddress;

                } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    fullAddr = data.jibunAddress;
                }

                // 사용자가 선택한 주소가 도로명 타입일때 조합한다.
                if(data.userSelectedType === 'R'){
                    //법정동명이 있을 경우 추가한다.
                    if(data.bname !== ''){
                        extraAddr += data.bname;
                    }
                    // 건물명이 있을 경우 추가한다.
                    if(data.buildingName !== ''){
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
                    fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');
                }

                // 우편번호와 주소 정보를 해당 필드에 넣는다.
                document.getElementById('sample6_postcode').value = data.zonecode; //5자리 새우편번호 사용
                document.getElementById('sample6_address').value = fullAddr;

                // 커서를 상세주소 필드로 이동한다.
                document.getElementById('sample6_address2').focus();
            }
        }).open();
    }
</script>
<script>
$('#photo').fileinput({
    theme: 'fa',
});

</script>

</body>
</html>
    