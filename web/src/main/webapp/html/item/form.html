
<!DOCTYPE html>
<html>
<head>
<title>물품 등록</title>
<meta charset='UTF-8'>
<link rel="stylesheet" href='/node_modules/bootstrap/dist/css/bootstrap.min.css'>

<style type="text/css">

</style>

<link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/freelancer.min.css" rel="stylesheet">
    <link href="/css/test.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/earlyaccess/nanumgothic.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="/css/fileupload.css" rel="stylesheet" type="text/css">

</head>
<body>
<header>  
       <div class="header1">
        <div class="header_text">
        <a style="margin-left:50px; color: black; text-decoration: none;" href="../main/main">
        <h4 class="fontsetting">SharerSharee</h4></a>
        <nav class="nav1">
        <ul class="ul1">
        
        <li style="margin-right:50px; float: right; padding: 0; list-style: none;">
      <a id='userName'style="color: black;"></a>
        <a href="/app/auth/logout" 
           style="color: black; text-decoration: none;" class='login1'>Logout</a>
    </li>
        </ul>
        </nav>
        </div>
        </div>
    </header>

<div style="width: 700px;" class='container'>
<div class='row justify-content-md-center'>
<button id='rentView' class="col-sm-5 btn btn-primary">빌려드립니다</button>
<div class="col-sm-2"></div>
<button id='lendView' class="col-sm-5 btn btn-secondary">빌려주세요</button>
</div>
<br><br>

<form id='formData' method="post" enctype="multipart/form-data">

<input id='userType' type="hidden" name='userType' value=0> <!-- userType 0은 빌려드립니다 카테고리 -->
<input type="hidden" id='status' name='status' value=0> <!-- status 0은 그냥 등록상태 1은 대여상태 -->
<div class="form-group row">
<div class="col-sm-2"></div>
<div class="col-sm-10">
    <select id='category' class="btn btn-secondary data-reset" name="category"><option value=0>카테고리</option>
    <option value=1>전자제품</option>
    <option value=2>뷰티/악세</option>
    <option value=3>의류</option>
    <option value=4>공구</option>
    <option value=5>ETC</option>
    </select>
    </div>
    
</div>
<div class="form-group row">
<label class="col-sm-2 col-form-label" for="itemName">물품정보</label>
<div class="col-sm-10">
<input id='itemName' class="form-control data-reset" type="text" placeholder="물품정보를 입력하세요" name='name'>
</div>
</div>

<div class="form-group row">
<label class="col-sm-2 col-form-label" for="title">제목</label>
<div class="col-sm-10">
<input id='title' type='text' class="form-control data-reset" placeholder="제목을 입력하세요" name='title'>
</div>
</div>

<div class="form-group row">
<label class="col-sm-2 col-form-label" for="content">내용</label>
<div class="col-sm-10">
<textarea id='content' class="form-control data-reset" placeholder="내용을 입력하세요"  name='content'>
</textarea>
</div>
</div>

<div class="form-group row">
<div class="col-sm-2" style="margin-right:15px ;">사진 첨부</div>
<div class="filebox bs3-primary preview-image">
  <input class="upload-name" value="파일선택" disabled="disabled" style="width: 200px;">
<label for="file1">업로드</label> 
  <input type="file" id="file1" name='photo' class="upload-hidden"> 
</div>
</div>

  
<div class="form-group row">
<div class="col-sm-2" style="margin-right:15px ;"></div>
<div class="filebox bs3-primary preview-image">
  <input class="upload-name" value="파일선택" disabled="disabled" style="width: 200px;">
<label for="file2">업로드</label> 
  <input type="file" id="file2" name='photo' class="upload-hidden"> 
</div>
</div>

<div class="form-group row">
<div class="col-sm-2" style="margin-right:15px ;"></div>
<div class="filebox bs3-primary preview-image">
  <input class="upload-name" value="파일선택" disabled="disabled" style="width: 200px;">
<label for="file3">업로드</label> 
  <input type="file" id="file3" name='photo' class="upload-hidden"> 
</div>
</div>

<div class="form-group row my-view">
<label style='padding-right: 0px;' class="col-sm-2 col-form-label" for="startDate">쉐어가능기간</label>
<div class="col-sm-10">
<input style="width:200px; display: inline-block" id='startDate' type='date' 
        class="form-control data-reset" placeholder="시작일" name='startDate'>
 
<input style="width:200px; display: inline-block" id='endDate' type='date' 
        class="form-control data-reset" placeholder="종료일" name='endDate'>
</div>
</div>

<div class="form-group row my-view">
<label class="col-sm-2 col-form-label" for="price">원가격</label>
<div class="col-sm-10">
<input id='price' type='number' class="form-control data-reset" placeholder="원가격을 입력하세요" name='price'>
</div>
</div>

<div class="form-group row my-view">
<label class="col-sm-2 col-form-label" for=pricePerDay>쉐어 비용</label>
<div class="col-sm-10">
<input id='pricePerDay' type='number' class="form-control data-reset" placeholder="쉐어비용을 입력하세요" name='pricePerDay'>
</div>
</div>
</form>

<div class='row justify-content-md-center'>
<button id='addBtn' type="button" style='width:200px;'class="btn btn-primary">등록</button>
</div>


</div>
<script src='/node_modules/jquery/dist/jquery.min.js'></script>
<script src='/node_modules/popper.js/dist/umd/popper.min.js'></script>
<script src='/node_modules/bootstrap/dist/js/bootstrap.min.js'></script>
<script src='/js/fileupload.js'></script>

<script type="text/javascript">
var addBtn = $('#addBtn'),
    userType = $('#userType'),
    userNo = $('#userNo'),
    category = $('#category'),
    itemName = $('#itemName'),
    title = $('#title'),
    content = $('#content'),
    startDate = $('#startDate'),
    endDate = $('#endDate'),
    price = $('#price'),
    pricePerDay = $('#pricePerDay');
    
$.ajax({
    type: 'POST',
    url: '/json/auth/userName',
    success: (data) => {
        $('#userName').html(data);
        },
    error: () => {
        alert('회원정보 로드 실패!');
    }
});    //end ajax    

//빌려드립니다 클릭이벤트
$('#rentView').click(() => {
    $('.my-view').css('display',"");
    $('#rentView').removeClass('btn-secondary').addClass('btn-primary');
    $('#lendView').removeClass('btn-primary').addClass('btn-secondary');
    $('form')[0].reset();
    $('#status').val(0); 
    userType.val(0);
});
//빌려주세요 클릭이벤트
$('#lendView').click(() => {
    $('.my-view').css('display', 'none'); 
    $('#rentView').removeClass('btn-primary').addClass('btn-secondary');
    $('#lendView').removeClass('btn-secondary').addClass('btn-primary');
    $('form')[0].reset();
    $('#status').val(0); 
    userType.val(1);
});

addBtn.click(() => {
    
    if (category.val() == 0) {
        return alert('카테고리 선택하세요');
    }
    if (userType.val() == 1) {
        deleteName();
        };
    
    var formData = new FormData($('#formData')[0]);
    $.ajax('../../json/item/add', {
        data: formData,
        dataType: 'json',
        method: 'POST',
        processData: false,
        contentType: false,
        success: () => {
            location.href='/app/item/list';
            },
        error: (request,status,error) => {
            alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
    }); 
    
    
});
//빌려주세요에서 값이 없으면 오류나서 안쓰이는 인풋쪽 name속성 삭제

function deleteName() {
    startDate.removeAttr('name');
    endDate.removeAttr('name');
    price.removeAttr('name');
    pricePerDay.removeAttr('name');
}

category.on('change',() => {
    if (category.val() != 0) {
        category.removeClass('btn-secondary').addClass('btn-primary');
    } else {
        category.removeClass('btn-primary').addClass('btn-secondary');
    }
});



</script>

</body>
</html>
    