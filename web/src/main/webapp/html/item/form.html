
<!DOCTYPE html>
<html>
<head>
<title>물품 등록</title>
<meta charset='UTF-8'>
<link rel="stylesheet" href='../../node_modules/bootstrap/dist/css/bootstrap.min.css'>
<link href="http://fonts.googleapis.com/earlyaccess/nanumgothic.css" rel="stylesheet" type="text/css">

</head>
<body>


<div style="width: 700px;" class='container'>
<div class='row justify-content-md-center'>
<button id='rentView' class="col-sm-5 btn btn-primary">빌려드립니다</button>
<div class="col-sm-2"></div>
<button id='lendView' class="col-sm-5 btn btn-secondary">빌려주세요</button>
</div>
<br><br>

<form id='formData' method="post" enctype="multipart/form-data">

<input id='userType' type="hidden" name='userType' value=0> <!-- userType 0은 빌려드립니다 카테고리 -->
<input type="hidden" id='status' name='status' value=0> <!-- status 0은 그냥 등록상태 1은 대여상태 -->
<div class="form-group row">
<div class="col-sm-2"></div>
<div class="col-sm-10">
    <select id='category' class="btn btn-secondary data-reset" name="category"><option value=0>카테고리</option>
    <option value=1>전자제품</option>
    <option value=2>뷰티/악세</option>
    <option value=3>의류</option>
    <option value=4>공구</option>
    <option value=5>ETC</option>
    </select>
    </div>
    
</div>
<div class="form-group row">
<label class="col-sm-2 col-form-label" for="itemName">물품정보</label>
<div class="col-sm-10">
<input id='itemName' class="form-control data-reset" type="text" placeholder="물품정보를 입력하세요" name='name'>
</div>
</div>

<div class="form-group row">
<label class="col-sm-2 col-form-label" for="title">제목</label>
<div class="col-sm-10">
<input id='title' type='text' class="form-control data-reset" placeholder="제목을 입력하세요" name='title'>
</div>
</div>

<div class="form-group row">
<label class="col-sm-2 col-form-label" for="content">내용</label>
<div class="col-sm-10">
<textarea id='content' class="form-control data-reset" placeholder="내용을 입력하세요"  name='content'>
</textarea>
</div>
</div>

<div class="form-group row">
<label class="col-sm-2 col-form-label" for="photo">사진첨부</label>
<div class="col-sm-10">
<input class='data-reset' id='photo1' type="file" name='photo'>
</div>
</div>
<div class="form-group row">
<label class="col-sm-2 col-form-label" for="photo">사진첨부</label>
<div class="col-sm-10">
<input class='data-reset' id='photo2' type="file" name='photo'>
</div>
</div>
<div class="form-group row">
<label class="col-sm-2 col-form-label" for="photo">사진첨부</label>
<div class="col-sm-10">
<input class='data-reset' id='photo3' type="file" name='photo'>
</div>
</div>

<div class="form-group row my-view">
<label class="col-sm-2 col-form-label" for="startDate">쉐어가능기간</label>
<div class="col-sm-10">
<input style="width:200px; display: inline-block" id='startDate' type='date' 
        class="form-control data-reset" placeholder="시작일" name='startDate'>
 
<input style="width:200px; display: inline-block" id='endDate' type='date' 
        class="form-control data-reset" placeholder="종료일" name='endDate'>
</div>
</div>

<div class="form-group row my-view">
<label class="col-sm-2 col-form-label" for="price">원가격</label>
<div class="col-sm-10">
<input id='price' type='number' class="form-control data-reset" placeholder="원가격을 입력하세요" name='price'>
</div>
</div>

<div class="form-group row my-view">
<label class="col-sm-2 col-form-label" for=pricePerDay>쉐어 비용</label>
<div class="col-sm-10">
<input id='pricePerDay' type='number' class="form-control data-reset" placeholder="쉐어비용을 입력하세요" name='pricePerDay'>
</div>
</div>
</form>

<div class='row justify-content-md-center'>
<button id='addBtn' type="button" style='width:200px;'class="btn btn-primary">등록</button>
</div>


</div>
<script src='/node_modules/jquery/dist/jquery.min.js'></script>
<script src='/node_modules/popper.js/dist/umd/popper.min.js'></script>
<script src='/node_modules/bootstrap/dist/js/bootstrap.min.js'></script>
<script type="text/javascript">
var addBtn = $('#addBtn'),
    userType = $('#userType'),
    userNo = $('#userNo'),
    category = $('#category'),
    itemName = $('#itemName'),
    title = $('#title'),
    content = $('#content'),
    startDate = $('#startDate'),
    endDate = $('#endDate'),
    price = $('#price'),
    pricePerDay = $('#pricePerDay');
//빌려드립니다 클릭이벤트
$('#rentView').click(() => {
    $('.my-view').css('display',"");
    $('#rentView').removeClass('btn-secondary').addClass('btn-primary');
    $('#lendView').removeClass('btn-primary').addClass('btn-secondary');
    $('form')[0].reset();
    $('#status').val(0); 
    userType.val(0);
});
//빌려주세요 클릭이벤트
$('#lendView').click(() => {
    $('.my-view').css('display', 'none'); 
    $('#rentView').removeClass('btn-primary').addClass('btn-secondary');
    $('#lendView').removeClass('btn-secondary').addClass('btn-primary');
    $('form')[0].reset();
    $('#status').val(0); 
    userType.val(1);
});

addBtn.click(() => {
    if (category.val() == 0) {
        return alert('카테고리 선택하세요');
    }
    if (userType.val() == 1) {
        deleteName();
        };
    
    var formData = new FormData($('#formData')[0]);
    $.ajax('../../json/item/add', {
        data: formData,
        dataType: 'json',
        method: 'POST',
        processData: false,
        contentType: false,
        success: (result) => {
            alert();
            location.href='list.html';
            },
        error: (request,status,error) => {
            alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
    }); 
    
    
});
//빌려주세요에서 값이 없으면 오류나서 안쓰이는 인풋쪽 name속성 삭제

function deleteName() {
    startDate.removeAttr('name');
    endDate.removeAttr('name');
    price.removeAttr('name');
    pricePerDay.removeAttr('name');
}
</script>

</body>
</html>
    