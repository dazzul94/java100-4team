<!DOCTYPE html>
<html>
<head>
<style type="text/css">
</style>
<title>리스트</title>
<link rel="stylesheet"
    href='../../node_modules/bootstrap/dist/css/bootstrap.min.css'>
</head>
<body>

        <div class='container'>
        <div class='row justify-content-md-center'>
            <button class="col-sm-5 btn btn-primary"
                onclick="location.href='list'">빌려드립니다</button>
            <div class="col-sm-2"></div>
            <button class="col-sm-5 btn btn-primary"
                onclick="location.href='lendlist'">빌려주세요</button>
        </div>
        </div>
    
<div class="album py-5">
    <div class='container'>
        <div class='row'>
         <c:forEach items="${list}" var="item">
            <c:set var="userType" value="${item.userType}"/>
              <c:if test="${userType eq 0}">
              
            <div class="col-md-4 col-sm-6 col-xs-12 m_pointer" onclick="location.href='${item.itemNo}'">
              <div class="card mb-4 box-shadow">

              <img class="card-img-top"
                            data-src="holder.js/300x200?theme=thumb"
                            alt="Thumbnail [300x200]"
                            style="height: 225px; width: 100%; display: block;"
                            <c:forEach items="${item.photos}" var="photo">
                                src="${contextPath}/download/${photo.photoName}"
                            </c:forEach>
                            data-holder-rendered="true">
                
                <div class="card-body">
                <h3 class="mb-0">
                  <p class="card-text text-truncate">${item.title}</p></h3>
                  <p class="card-text mb-1 text-muted">${item.startDate}-${item.endDate}</p>
                  <p class="card-text text-truncate">${item.content}</p>
                  <p class="card-text text-truncate">${item.name}</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <!-- <div class="btn-group">
                      <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                    </div>
                    <small class="text-muted">9 mins</small> -->
                  </div>
                </div>
              </div>
            </div>
          </c:if>
        </c:forEach>
        
   <nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item">
    <a id="prevBtn" class="page-link" tabindex="-1">이전</a></li>
        
    <li class="page-item"><a id="currBtn" class="page-link" href="#">1</a></li>
    
    <li class="page-item ">
    <a id="nextBtn" class="page-link" tabindex="0">다음</a></li>
  </ul>
</nav>
        
</div>
</div>

    <style type="text/css">
      .m_pointer{
        cursor: pointer;
      }
    </style>
<script type="text/javascript">


load(1);

function load(pageNo, options) {
    
    if (options == undefined) options = {};
    options.pn = pageNo;
    
    $.ajax('../json/score/list', {
        /* method: 'GET' */
        data: options,
        dataType: 'json',
        success: (result) => {
            
            tbody.html(""); // <tbody> 콘텐츠를 지운다
            
            for (var data of result.list) {
                $('<tr>')
                .html(
                    "<td>" + data.no + "</td>" +
                    "<td><a href='form.html?no=" + data.no +"'>" + data.name + "</a></td>" +
                    "<td>" + data.sum + "</td>" +
                    "<td>" + data.aver+ "</td>")
                .appendTo(tbody);
            }
            
            currPageNo = result.pageNo;
            currBtn.html(currPageNo);
            
            if (result.pageNo == 1) {
                $(prevBtn.parent()).addClass("disabled");
            } else {
                $(prevBtn.parent()).removeClass("disabled");
            }
            
            if (result.lastPageNo == result.pageNo) {
                $(nextBtn.parent()).addClass("disabled");
            } else{
                $(nextBtn.parent()).removeClass("disabled");
            }
        },
        
        error: () => {
            window.alert('서버 실행 오류!');
        }
    });
    
}

</script>    
    
      
</body>
</html>
